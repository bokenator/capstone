{
  "condition": "c0",
  "complexity": "medium",
  "run_number": 2,
  "prompt_name": "MACD + ATR Trailing Stop",
  "prompt_interface": "from_order_func(flexible=False)",
  "max_turns": 10,
  "submissions": 10,
  "total_tokens": {
    "input_tokens": 294667,
    "output_tokens": 49130,
    "total_tokens": 343797
  },
  "generation": {
    "success": true,
    "error": "Max turns (10) exceeded"
  },
  "verification": {
    "success": true,
    "error": null,
    "results": {
      "schema": {
        "passed": true,
        "errors": []
      },
      "documentation": {
        "passed": true,
        "errors": []
      },
      "tests": {
        "passed": true,
        "errors": []
      }
    }
  },
  "backtest": {
    "success": false,
    "error": "Portfolio.from_order_func failed: 'size_type'\nTraceback (most recent call last):\n  File \"/root/wqu/capstone/w4/experiments_imp/backtests/medium.py\", line 93, in run_backtest\n    pf = vbt.Portfolio.from_order_func(\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/vectorbt/portfolio/base.py\", line 3919, in from_order_func\n    order_records, log_records = simulate_func(\n                                 ^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/vectorbt/portfolio/nb.py\", line 3040, in simulate_nb\n    order_result, new_state = process_order_nb(\n                              ^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/dispatcher.py\", line 443, in _compile_for_args\n    raise e\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/dispatcher.py\", line 376, in _compile_for_args\n    return_val = self.compile(tuple(argtypes))\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/dispatcher.py\", line 908, in compile\n    cres = self._compiler.compile(args, return_type)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/dispatcher.py\", line 80, in compile\n    status, retval = self._compile_cached(args, return_type)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/dispatcher.py\", line 94, in _compile_cached\n    retval = self._compile_core(args, return_type)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/dispatcher.py\", line 107, in _compile_core\n    cres = compiler.compile_extra(self.targetdescr.typing_context,\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/compiler.py\", line 739, in compile_extra\n    return pipeline.compile_extra(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/compiler.py\", line 439, in compile_extra\n    return self._compile_bytecode()\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/compiler.py\", line 505, in _compile_bytecode\n    return self._compile_core()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/compiler.py\", line 481, in _compile_core\n    raise e\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/compiler.py\", line 473, in _compile_core\n    pm.run(self.state)\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/compiler_machinery.py\", line 363, in run\n    raise e\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/compiler_machinery.py\", line 356, in run\n    self._runPass(idx, pass_inst, state)\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/compiler_lock.py\", line 35, in _acquire_compile_lock\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/compiler_machinery.py\", line 311, in _runPass\n    mutated |= check(pss.run_pass, internal_state)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/compiler_machinery.py\", line 272, in check\n    mangled = func(compiler_state)\n              ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/typed_passes.py\", line 114, in run_pass\n    typemap, return_type, calltypes, errs = type_inference_stage(\n                                            ^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/typed_passes.py\", line 95, in type_inference_stage\n    errs = infer.propagate(raise_errors=raise_errors)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/typeinfer.py\", line 1075, in propagate\n    errors = self.constraints.propagate(self)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/typeinfer.py\", line 160, in propagate\n    constraint(typeinfer)\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/typeinfer.py\", line 572, in __call__\n    self.resolve(typeinfer, typevars, fnty)\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/typeinfer.py\", line 595, in resolve\n    sig = typeinfer.resolve_call(fnty, pos_args, kw_args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/typeinfer.py\", line 1569, in resolve_call\n    return self.context.resolve_function_type(fnty, pos_args, kw_args)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/typing/context.py\", line 279, in resolve_function_type\n    res = self._resolve_user_function_type(func, args, kws)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/typing/context.py\", line 335, in _resolve_user_function_type\n    return func.get_call_type(self, args, kws)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/types/functions.py\", line 541, in get_call_type\n    self.dispatcher.get_call_template(args, kws)\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/dispatcher.py\", line 319, in get_call_template\n    self.compile(tuple(args))\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/dispatcher.py\", line 908, in compile\n    cres = self._compiler.compile(args, return_type)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/dispatcher.py\", line 80, in compile\n    status, retval = self._compile_cached(args, return_type)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/dispatcher.py\", line 94, in _compile_cached\n    retval = self._compile_core(args, return_type)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/dispatcher.py\", line 107, in _compile_core\n    cres = compiler.compile_extra(self.targetdescr.typing_context,\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/compiler.py\", line 739, in compile_extra\n    return pipeline.compile_extra(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/compiler.py\", line 439, in compile_extra\n    return self._compile_bytecode()\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/compiler.py\", line 505, in _compile_bytecode\n    return self._compile_core()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/compiler.py\", line 481, in _compile_core\n    raise e\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/compiler.py\", line 473, in _compile_core\n    pm.run(self.state)\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/compiler_machinery.py\", line 363, in run\n    raise e\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/compiler_machinery.py\", line 356, in run\n    self._runPass(idx, pass_inst, state)\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/compiler_lock.py\", line 35, in _acquire_compile_lock\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/compiler_machinery.py\", line 311, in _runPass\n    mutated |= check(pss.run_pass, internal_state)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/compiler_machinery.py\", line 272, in check\n    mangled = func(compiler_state)\n              ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/typed_passes.py\", line 114, in run_pass\n    typemap, return_type, calltypes, errs = type_inference_stage(\n                                            ^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/typed_passes.py\", line 95, in type_inference_stage\n    errs = infer.propagate(raise_errors=raise_errors)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/typeinfer.py\", line 1075, in propagate\n    errors = self.constraints.propagate(self)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/typeinfer.py\", line 160, in propagate\n    constraint(typeinfer)\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/typeinfer.py\", line 716, in __call__\n    attrty = typeinfer.context.resolve_getattr(ty, self.attr)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/typing/context.py\", line 360, in resolve_getattr\n    out = core(typ)\n          ^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/typing/context.py\", line 356, in core\n    out = self.find_matching_getattr_template(typ, attr)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/typing/context.py\", line 384, in find_matching_getattr_template\n    return_type = template.resolve(typ, attr)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/typing/templates.py\", line 1029, in resolve\n    return self._resolve(value, attr)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/typing/templates.py\", line 1041, in _resolve\n    return fn(value, attr)\n           ^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/typing/arraydecl.py\", line 611, in generic_resolve\n    ret = record.typeof(attr)\n          ^^^^^^^^^^^^^^^^^^^\n  File \"/root/wqu/capstone/w4/experiments_imp/.venv/lib/python3.12/site-packages/numba/core/types/npytypes.py\", line 189, in typeof\n    return self.fields[key].type\n           ~~~~~~~~~~~^^^^^\nKeyError: 'size_type'\n",
    "metrics": {
      "total_return": null,
      "sharpe_ratio": null,
      "max_drawdown": null,
      "total_trades": null
    }
  }
}